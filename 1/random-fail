COMMAND_TO_RUN="random-fail"
OUTPUT_FILE="output.log"
ERROR_FILE="error.log"

run_counter=0

while true; do
    # Increment the run counter
    ((run_counter++))

    # Run the command and capture output and error
    $COMMAND_TO_RUN > "$OUTPUT_FILE" 2> "$ERROR_FILE"
    
    # Check the exit status of the command
    if [ $? -ne 0 ]; then
        echo "Command failed after $run_counter runs."
        break
    fi
done

echo "===== Standard Output ====="
cat "$OUTPUT_FILE"
echo "===== Standard Error ====="
cat "$ERROR_FILE"
